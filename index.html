<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Boldonse&family=Pixelify+Sans:wght@400..700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <!-- Tambahkan import ini di HTML jika belum ada -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/comment/comment.min.js"></script>
    <title>Desktop Environment</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Desktop area -->
    <div id="desktop">
      <!-- Windows will appear here -->
    </div>

    <!-- Application launcher -->
    <div id="app-dock">
      <button class="app-icon" data-app="calculator">ğŸ§®</button>
      <button class="app-icon" data-app="imageviewer">ğŸ–¼ï¸</button>
      <button class="app-icon" data-app="code-editor">ğŸ“„</button>
      <button class="app-icon" data-app="terminal">ğŸ’»</button>
    </div>

    <!-- App module scripts - make sure to load SystemFiles before other modules -->
    <script src="window-manager.js"></script>
    <script src="js/SystemFiles.js"></script>
    <script src="js/FileSystem.js"></script>
    <script src="apps/notepad.js"></script>
    <script src="apps/calculator.js"></script>
    <script src="apps/imageviewer.js"></script>
    <script src="apps/code-editor.js"></script>
    <script src="apps/terminal.js"></script>
    <script src="main.js"></script>

    <!-- Add initialization script to ensure SystemFiles is ready -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("DOMContentLoaded: Checking if SystemFiles is available");
        if (typeof window.SystemFiles === "undefined") {
          console.warn(
            "SystemFiles not initialized properly, attempting to reload"
          );
          const script = document.createElement("script");
          script.src = "js/SystemFiles.js";
          document.body.appendChild(script);
        }
      });
    </script>
  </body>
</html>
